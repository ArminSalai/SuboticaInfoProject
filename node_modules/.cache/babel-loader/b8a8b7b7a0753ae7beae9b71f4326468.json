{"remainingRequest":"/home/icbtech/Documents/SuboticaInfo/node_modules/babel-loader/lib/index.js!/home/icbtech/Documents/SuboticaInfo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/icbtech/Documents/SuboticaInfo/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/icbtech/Documents/SuboticaInfo/src/components/pages/CategoryAll.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/icbtech/Documents/SuboticaInfo/src/components/pages/CategoryAll.vue","mtime":1634295457760},{"path":"/home/icbtech/Documents/SuboticaInfo/node_modules/cache-loader/dist/cjs.js","mtime":1633932885843},{"path":"/home/icbtech/Documents/SuboticaInfo/node_modules/babel-loader/lib/index.js","mtime":1633932887491},{"path":"/home/icbtech/Documents/SuboticaInfo/node_modules/cache-loader/dist/cjs.js","mtime":1633932885843},{"path":"/home/icbtech/Documents/SuboticaInfo/node_modules/vue-loader-v16/dist/index.js","mtime":1633932888403}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFRoZUhlYWRlciBmcm9tICIuLi9VSS9UaGVIZWFkZXIudnVlIjsKaW1wb3J0IFJlc3VsdEl0ZW0gZnJvbSAiLi4vc2VhcmNoL1Jlc3VsdEl0ZW0udnVlIjsKaW1wb3J0IHsgdXNlUm91dGUgfSBmcm9tICJ2dWUtcm91dGVyIjsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgcmVmLCBjb21wdXRlZCwgb25Nb3VudGVkLCBvbkJlZm9yZVVubW91bnQgfSBmcm9tICJ2dWUiOwppbXBvcnQgeyBnc2FwIH0gZnJvbSAiZ3NhcCI7CmltcG9ydCB7IFNjcm9sbFRvUGx1Z2luIH0gZnJvbSAiZ3NhcC9TY3JvbGxUb1BsdWdpbiI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBUaGVIZWFkZXIsCiAgICBSZXN1bHRJdGVtCiAgfSwKCiAgc2V0dXAoKSB7CiAgICBnc2FwLnJlZ2lzdGVyUGx1Z2luKFNjcm9sbFRvUGx1Z2luKTsKICAgIGNvbnN0IHN0b3JlID0gdXNlU3RvcmUoKTsKICAgIGNvbnN0IHJvdXRlID0gdXNlUm91dGUoKTsKICAgIGNvbnN0IGNhdGVnb3J5ID0gcm91dGUucGFyYW1zLkNhdGVnb3J5OwogICAgY29uc3QgcGFnZSA9IHJlZigwKTsKICAgIGNvbnN0IHdhaXQgPSByZWYoZmFsc2UpOwogICAgY29uc3QgYXJ0aWNsZXMgPSBjb21wdXRlZCgoKSA9PiB7CiAgICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzLmdldEFydGljbGVzOwogICAgfSk7CgogICAgYXN5bmMgZnVuY3Rpb24gbG9hZCgpIHsKICAgICAgbGV0IHNjcm9sbFRvcCA9IHdpbmRvdy5zY3JvbGxZOwogICAgICBsZXQgZG9jSGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQ7CiAgICAgIGxldCB3aW5IZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7CiAgICAgIGxldCBzY3JvbGxQZXJjZW50ID0gc2Nyb2xsVG9wIC8gKGRvY0hlaWdodCAtIHdpbkhlaWdodCk7CgogICAgICBpZiAoc2Nyb2xsUGVyY2VudCA+IDAuOSAmJiAhd2FpdC52YWx1ZSkgewogICAgICAgIHBhZ2UudmFsdWUrKzsKICAgICAgICB3YWl0LnZhbHVlID0gdHJ1ZTsKICAgICAgICBhd2FpdCBzdG9yZS5kaXNwYXRjaCgibG9hZENhdGVnb3J5SXRlbXMiLCB7CiAgICAgICAgICBjYXRlZ29yeTogY2F0ZWdvcnksCiAgICAgICAgICBwYWdlOiBwYWdlLnZhbHVlCiAgICAgICAgfSk7CiAgICAgICAgd2FpdC52YWx1ZSA9IGZhbHNlOwogICAgICB9CiAgICB9CgogICAgb25CZWZvcmVVbm1vdW50KCgpID0+IHsKICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoInNjcm9sbCIsIGxvYWQpOwogICAgfSk7CiAgICBvbk1vdW50ZWQoYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigic2Nyb2xsIiwgbG9hZCk7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCJSZXNldCIpOwogICAgICBhd2FpdCBzdG9yZS5kaXNwYXRjaCgibG9hZENhdGVnb3J5SXRlbXMiLCB7CiAgICAgICAgY2F0ZWdvcnk6IGNhdGVnb3J5LAogICAgICAgIHBhZ2U6IHBhZ2UudmFsdWUKICAgICAgfSk7CiAgICB9KTsKICAgIHJldHVybiB7CiAgICAgIGNhdGVnb3J5LAogICAgICBhcnRpY2xlcywKICAgICAgbG9hZAogICAgfTsKICB9Cgp9Ow=="},{"version":3,"sources":["/home/icbtech/Documents/SuboticaInfo/src/components/pages/CategoryAll.vue"],"names":[],"mappings":"AAqBA,OAAO,SAAP,MAAsB,qBAAtB;AACA,OAAO,UAAP,MAAuB,0BAAvB;AACA,SAAS,QAAT,QAAyB,YAAzB;AACA,SAAS,QAAT,QAAyB,MAAzB;AACA,SAAS,GAAT,EAAc,QAAd,EAAwB,SAAxB,EAAmC,eAAnC,QAA0D,KAA1D;AACA,SAAS,IAAT,QAAqB,MAArB;AACA,SAAS,cAAT,QAA+B,qBAA/B;AAEA,eAAe;AACb,EAAA,UAAU,EAAE;AACV,IAAA,SADU;AAEV,IAAA;AAFU,GADC;;AAKb,EAAA,KAAK,GAAG;AACN,IAAA,IAAI,CAAC,cAAL,CAAoB,cAApB;AACA,UAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,UAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,UAAM,QAAO,GAAI,KAAK,CAAC,MAAN,CAAa,QAA9B;AACA,UAAM,IAAG,GAAI,GAAG,CAAC,CAAD,CAAhB;AACA,UAAM,IAAG,GAAI,GAAG,CAAC,KAAD,CAAhB;AACA,UAAM,QAAO,GAAI,QAAQ,CAAC,MAAM;AAC9B,aAAO,KAAK,CAAC,OAAN,CAAc,WAArB;AACD,KAFwB,CAAzB;;AAIA,mBAAe,IAAf,GAAsB;AACpB,UAAI,SAAQ,GAAI,MAAM,CAAC,OAAvB;AACA,UAAI,SAAQ,GAAI,QAAQ,CAAC,IAAT,CAAc,YAA9B;AACA,UAAI,SAAQ,GAAI,MAAM,CAAC,WAAvB;AACA,UAAI,aAAY,GAAI,SAAQ,IAAK,SAAQ,GAAI,SAAjB,CAA5B;;AACA,UAAI,aAAY,GAAI,GAAhB,IAAuB,CAAC,IAAI,CAAC,KAAjC,EAAwC;AACtC,QAAA,IAAI,CAAC,KAAL;AACA,QAAA,IAAI,CAAC,KAAL,GAAa,IAAb;AACA,cAAM,KAAK,CAAC,QAAN,CAAe,mBAAf,EAAoC;AACxC,UAAA,QAAQ,EAAE,QAD8B;AAExC,UAAA,IAAI,EAAE,IAAI,CAAC;AAF6B,SAApC,CAAN;AAIF,QAAA,IAAI,CAAC,KAAL,GAAa,KAAb;AACA;AACF;;AAEA,IAAA,eAAe,CAAC,MAAM;AACpB,MAAA,MAAM,CAAC,mBAAP,CAA2B,QAA3B,EAAqC,IAArC;AACD,KAFc,CAAf;AAIA,IAAA,SAAS,CAAC,kBAAkB;AAC1B,MAAA,MAAM,CAAC,gBAAP,CAAwB,QAAxB,EAAkC,IAAlC;AACA,MAAA,KAAK,CAAC,QAAN,CAAe,OAAf;AACA,YAAM,KAAK,CAAC,QAAN,CAAe,mBAAf,EAAoC;AACxC,QAAA,QAAQ,EAAE,QAD8B;AAExC,QAAA,IAAI,EAAE,IAAI,CAAC;AAF6B,OAApC,CAAN;AAID,KAPQ,CAAT;AASA,WAAO;AACL,MAAA,QADK;AAEL,MAAA,QAFK;AAGL,MAAA;AAHK,KAAP;AAKD;;AAlDY,CAAf","sourcesContent":["<template>\n  <TheHeader />\n  <div class=\"container\">\n    <h1 class=\"mt-5 mb-3\">{{ category.toUpperCase() }}</h1>\n    <div class=\"row d-flex flex-row\">\n      <ul class=\"p-0 mt-5 list-unstyled\">\n        <ResultItem\n          v-for=\"article in articles\"\n          :key=\"article.Nid\"\n          :index=\"article.Nid\"\n          :title=\"article.Naslov\"\n          :fullDesc=\"article['Sadrzaj clanka']\"\n          :image=\"article['Vodeca slika']\"\n          :date=\"article['Post date']\"\n        />\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport TheHeader from \"../UI/TheHeader.vue\";\nimport ResultItem from \"../search/ResultItem.vue\";\nimport { useRoute } from \"vue-router\";\nimport { useStore } from \"vuex\";\nimport { ref, computed, onMounted, onBeforeUnmount } from \"vue\";\nimport { gsap } from \"gsap\";\nimport { ScrollToPlugin } from \"gsap/ScrollToPlugin\";\n\nexport default {\n  components: {\n    TheHeader,\n    ResultItem,\n  },\n  setup() {\n    gsap.registerPlugin(ScrollToPlugin);\n    const store = useStore();\n    const route = useRoute();\n    const category = route.params.Category;\n    const page = ref(0);\n    const wait = ref(false);\n    const articles = computed(() => {\n      return store.getters.getArticles;\n    });\n\n    async function load() {\n      let scrollTop = window.scrollY;\n      let docHeight = document.body.offsetHeight;\n      let winHeight = window.innerHeight;\n      let scrollPercent = scrollTop / (docHeight - winHeight);\n      if (scrollPercent > 0.9 && !wait.value) {\n        page.value++;\n        wait.value = true;\n        await store.dispatch(\"loadCategoryItems\", {\n          category: category,\n          page: page.value,\n        });\n      wait.value = false;\n      }\n    }\n\n    onBeforeUnmount(() => {\n      window.removeEventListener(\"scroll\", load);\n    });\n\n    onMounted(async function () {\n      window.addEventListener(\"scroll\", load);\n      store.dispatch(\"Reset\");\n      await store.dispatch(\"loadCategoryItems\", {\n        category: category,\n        page: page.value,\n      });\n    });\n\n    return {\n      category,\n      articles,\n      load,\n    };\n  },\n};\n</script>"],"sourceRoot":""}]}