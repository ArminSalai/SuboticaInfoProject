{"remainingRequest":"/home/icbtech/Documents/SuboticaInfo/node_modules/babel-loader/lib/index.js!/home/icbtech/Documents/SuboticaInfo/node_modules/eslint-loader/index.js??ref--13-0!/home/icbtech/Documents/SuboticaInfo/src/components/store/auth/actions.js","dependencies":[{"path":"/home/icbtech/Documents/SuboticaInfo/src/components/store/auth/actions.js","mtime":1634564408921},{"path":"/home/icbtech/Documents/SuboticaInfo/node_modules/cache-loader/dist/cjs.js","mtime":1633932885843},{"path":"/home/icbtech/Documents/SuboticaInfo/node_modules/babel-loader/lib/index.js","mtime":1633932887491},{"path":"/home/icbtech/Documents/SuboticaInfo/node_modules/eslint-loader/index.js","mtime":1633932886083}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:bGV0IHRpbWVyOwpleHBvcnQgZGVmYXVsdCB7CiAgYXN5bmMgcmVnaXN0ZXIoY29udGV4dCwgcGF5bG9hZCkgewogICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9pZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb20vdjEvYWNjb3VudHM6c2lnblVwP2tleT1BSXphU3lCcHZOajU2c19EQmlTbFhYVjlmSzZhaW1KSFFWS0JhaUUnLCB7CiAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgZW1haWw6IHBheWxvYWQuZW1haWwsCiAgICAgICAgcGFzc3dvcmQ6IHBheWxvYWQucGFzc3dvcmQsCiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUKICAgICAgfSkKICAgIH0pOwogICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKCiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihkYXRhLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBsb2FkJyk7CiAgICAgIHRocm93IGVycm9yOwogICAgfQoKICAgIGNvbnN0IGV4cGlyZXNJbiA9ICtkYXRhLmV4cGlyZXNJbiAqIDEwMDA7CiAgICBjb25zdCBleHBpcmF0aW9uRGF0ZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgZXhwaXJlc0luOwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgZGF0YS5pZFRva2VuKTsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VySWQnLCBkYXRhLmxvY2FsSWQpOwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuRXhwaXJhdGlvbicsIGV4cGlyYXRpb25EYXRlKTsKICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnRleHQuZGlzcGF0Y2goJ2xvZ291dCcpOwogICAgfSwgZXhwaXJlc0luKTsKICAgIGNvbnRleHQuY29tbWl0KCdzZXRVc2VyJywgewogICAgICB0b2tlbjogZGF0YS5pZFRva2VuLAogICAgICB1c2VySWQ6IGRhdGEubG9jYWxJZAogICAgfSk7CiAgfSwKCiAgYXN5bmMgbG9naW4oY29udGV4dCwgcGF5bG9hZCkgewogICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9pZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb20vdjEvYWNjb3VudHM6c2lnbkluV2l0aFBhc3N3b3JkP2tleT1BSXphU3lCcHZOajU2c19EQmlTbFhYVjlmSzZhaW1KSFFWS0JhaUUnLCB7CiAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgZW1haWw6IHBheWxvYWQuZW1haWwsCiAgICAgICAgcGFzc3dvcmQ6IHBheWxvYWQucGFzc3dvcmQsCiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUKICAgICAgfSkKICAgIH0pOwogICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKCiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihkYXRhLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBsb2FkJyk7CiAgICAgIHRocm93IGVycm9yOwogICAgfQoKICAgIGNvbnN0IGV4cGlyZXNJbiA9ICtkYXRhLmV4cGlyZXNJbiAqIDEwMDA7CiAgICBjb25zdCBleHBpcmF0aW9uRGF0ZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgZXhwaXJlc0luOwogICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgY29udGV4dC5kaXNwYXRjaCgnbG9nb3V0Jyk7CiAgICB9LCBleHBpcmVzSW4pOwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgZGF0YS5pZFRva2VuKTsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VySWQnLCBkYXRhLmxvY2FsSWQpOwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuRXhwaXJhdGlvbicsIGV4cGlyYXRpb25EYXRlKTsKICAgIGNvbnRleHQuY29tbWl0KCdzZXRVc2VyJywgewogICAgICB0b2tlbjogZGF0YS5pZFRva2VuLAogICAgICB1c2VySWQ6IGRhdGEubG9jYWxJZAogICAgfSk7CiAgfSwKCiAgYXV0b0xvZ2luKGNvbnRleHQpIHsKICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgICBjb25zdCB1c2VySWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJyk7CiAgICBjb25zdCB0b2tlbkV4cGlyYXRpb24gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW5FeHBpcmF0aW9uJyk7CiAgICBjb25zdCBleHBpcmVzSW4gPSArdG9rZW5FeHBpcmF0aW9uIC0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CgogICAgaWYgKGV4cGlyZXNJbiA8IDEwKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBjb250ZXh0LmRpc3BhdGNoKCdsb2dvdXQnKTsKICAgIH0sIGV4cGlyZXNJbik7CgogICAgaWYgKHRva2VuICYmIHVzZXJJZCkgewogICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VXNlcicsIHsKICAgICAgICB0b2tlbjogdG9rZW4sCiAgICAgICAgdXNlcklkOiB1c2VySWQKICAgICAgfSk7CiAgICB9CiAgfSwKCiAgbG9nb3V0KGNvbnRleHQpIHsKICAgIGNvbnRleHQuY29tbWl0KCdsb2dvdXQnKTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXJJZCcpOwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuRXhwaXJhdGlvbicpOwogICAgY2xlYXJUaW1lb3V0KHRpbWVyKTsKICB9LAoKICBhc3luYyBjb21tZW50KGNvbnRleHQsIHBheWxvYWQpIHsKICAgIGlmIChjb250ZXh0LnN0YXRlLnVzZXJJZCAhPSBudWxsKSB7CiAgICAgIGNvbnN0IHBvc3RUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goImh0dHBzOi8vc3Vib3RpY2EtaW5mby01ZWU1YS1kZWZhdWx0LXJ0ZGIuZXVyb3BlLXdlc3QxLmZpcmViYXNlZGF0YWJhc2UuYXBwL2NvbW1lbnRzLmpzb24iLCB7CiAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgdXNlcjogY29udGV4dC5zdGF0ZS51c2VySWQsCiAgICAgICAgICBjb21tZW50OiBwYXlsb2FkLmNvbW1lbnQsCiAgICAgICAgICBhcnRpY2xlTmlkOiBwYXlsb2FkLmFydGljbGVOaWQsCiAgICAgICAgICBpZDogY29udGV4dC5zdGF0ZS51c2VySWQgKyBwb3N0VGltZQogICAgICAgIH0pCiAgICAgIH0pOwogICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwoKICAgICAgaWYgKCFyZXNwb25zZS5vaykgewogICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGRhdGEubWVzc2FnZSB8fCAnRmFpbGVkIHRvIGxvYWQgY29tbWVudHMnKTsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfQogICAgfSBlbHNlIGFsZXJ0KCJQbGVhc2UgIik7CiAgfSwKCiAgYXN5bmMgbG9hZENvbW1lbnRzKGNvbnRleHQsIHBheWxvYWQpIHsKICAgIGNvbnRleHQuc3RhdGUuY29tbWVudHMgPSBbXTsKICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goImh0dHBzOi8vc3Vib3RpY2EtaW5mby01ZWU1YS1kZWZhdWx0LXJ0ZGIuZXVyb3BlLXdlc3QxLmZpcmViYXNlZGF0YWJhc2UuYXBwL2NvbW1lbnRzLmpzb24iKTsKICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7CgogICAgaWYgKCFyZXNwb25zZS5vaykgewogICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoZGF0YS5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gbG9hZCBjb21tZW50cycpOwogICAgICB0aHJvdyBlcnJvcjsKICAgIH0KCiAgICBjb25zdCBjb21tZW50cyA9IE9iamVjdC52YWx1ZXMoZGF0YSk7CiAgICBjb250ZXh0LmNvbW1pdCgnYWRkQ29tbWVudCcsIGNvbW1lbnRzLmZpbHRlcihjID0+IGMuYXJ0aWNsZU5pZCA9PSBwYXlsb2FkKSk7CiAgfQoKfTs="},{"version":3,"sources":["/home/icbtech/Documents/SuboticaInfo/src/components/store/auth/actions.js"],"names":["timer","register","context","payload","response","fetch","method","body","JSON","stringify","email","password","returnSecureToken","data","json","ok","console","log","error","Error","message","expiresIn","expirationDate","Date","getTime","localStorage","setItem","idToken","localId","setTimeout","dispatch","commit","token","userId","login","autoLogin","getItem","tokenExpiration","logout","removeItem","clearTimeout","comment","state","postTime","user","articleNid","id","alert","loadComments","comments","Object","values","filter","c"],"mappings":"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","sourcesContent":["let timer;\n\nexport default {\n    async register(context, payload) {\n        const response = await fetch('https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyBpvNj56s_DBiSlXXV9fK6aimJHQVKBaiE', {\n            method: 'POST',\n            body: JSON.stringify({\n                email: payload.email,\n                password: payload.password,\n                returnSecureToken: true\n            })\n        });\n\n        const data = await response.json();\n\n        if (!response.ok) {\n            console.log(data)\n            const error = new Error(data.message || 'Failed to load');\n            throw error;\n        }\n\n        const expiresIn = +data.expiresIn * 1000;\n        const expirationDate = new Date().getTime() + expiresIn;\n\n        localStorage.setItem('token', data.idToken);\n        localStorage.setItem('userId', data.localId);\n        localStorage.setItem('tokenExpiration', expirationDate);\n\n        timer = setTimeout(function () {\n            context.dispatch('logout');\n        }, expiresIn);\n\n        context.commit('setUser', {\n            token: data.idToken,\n            userId: data.localId,\n        })\n    },\n\n    async login(context, payload) {\n        const response = await fetch('https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBpvNj56s_DBiSlXXV9fK6aimJHQVKBaiE', {\n            method: 'POST',\n            body: JSON.stringify({\n                email: payload.email,\n                password: payload.password,\n                returnSecureToken: true\n            })\n        });\n\n        const data = await response.json();\n\n        if (!response.ok) {\n            console.log(data)\n            const error = new Error(data.message || 'Failed to load');\n            throw error;\n        }\n\n        const expiresIn = +data.expiresIn * 1000;\n        const expirationDate = new Date().getTime() + expiresIn;\n\n        timer = setTimeout(function () {\n            context.dispatch('logout');\n        }, expiresIn);\n\n        localStorage.setItem('token', data.idToken);\n        localStorage.setItem('userId', data.localId);\n        localStorage.setItem('tokenExpiration', expirationDate);\n\n        context.commit('setUser', {\n            token: data.idToken,\n            userId: data.localId,\n        })\n    },\n\n    autoLogin(context) {\n        const token = localStorage.getItem('token');\n        const userId = localStorage.getItem('userId');\n        const tokenExpiration = localStorage.getItem('tokenExpiration');\n\n        const expiresIn = + tokenExpiration - new Date().getTime();\n\n        if (expiresIn < 10) {\n            return;\n        }\n\n        timer = setTimeout(function () {\n            context.dispatch('logout');\n        }, expiresIn);\n\n        if (token && userId) {\n            context.commit('setUser', {\n                token: token,\n                userId: userId,\n            })\n        }\n    },\n\n    logout(context) {\n        context.commit('logout');\n        localStorage.removeItem('token');\n        localStorage.removeItem('userId');\n        localStorage.removeItem('tokenExpiration');\n\n        clearTimeout(timer);\n    },\n\n    async comment(context, payload) {\n        if (context.state.userId != null) {\n            const postTime = new Date().getTime();\n            const response = await fetch(\"https://subotica-info-5ee5a-default-rtdb.europe-west1.firebasedatabase.app/comments.json\", {\n                method: 'POST',\n                body: JSON.stringify({\n                    user: context.state.userId,\n                    comment: payload.comment,\n                    articleNid: payload.articleNid,\n                    id: context.state.userId + postTime\n                })\n            });\n\n            const data = await response.json();\n\n            if (!response.ok) {\n                console.log(data)\n                const error = new Error(data.message || 'Failed to load comments');\n                throw error;\n            }\n        }\n        else\n        alert(\"Please \")\n    },\n\n    async loadComments(context, payload) {\n        context.state.comments = [];\n        const response = await fetch(\"https://subotica-info-5ee5a-default-rtdb.europe-west1.firebasedatabase.app/comments.json\");\n\n        const data = await response.json();\n\n        if (!response.ok) {\n            console.log(data)\n            const error = new Error(data.message || 'Failed to load comments');\n            throw error;\n        }\n\n        const comments = Object.values(data);\n\n        context.commit('addComment', comments.filter(c => c.articleNid == payload));\n    }\n}"]}]}