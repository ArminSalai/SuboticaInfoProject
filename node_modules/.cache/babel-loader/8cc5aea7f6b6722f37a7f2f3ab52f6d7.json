{"remainingRequest":"/home/icbtech/Documents/SuboticaInfo/node_modules/babel-loader/lib/index.js!/home/icbtech/Documents/SuboticaInfo/node_modules/eslint-loader/index.js??ref--13-0!/home/icbtech/Documents/SuboticaInfo/src/components/store/auth/actions.js","dependencies":[{"path":"/home/icbtech/Documents/SuboticaInfo/src/components/store/auth/actions.js","mtime":1634565359863},{"path":"/home/icbtech/Documents/SuboticaInfo/node_modules/cache-loader/dist/cjs.js","mtime":1633932885843},{"path":"/home/icbtech/Documents/SuboticaInfo/node_modules/babel-loader/lib/index.js","mtime":1633932887491},{"path":"/home/icbtech/Documents/SuboticaInfo/node_modules/eslint-loader/index.js","mtime":1633932886083}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:bGV0IHRpbWVyOwpleHBvcnQgZGVmYXVsdCB7CiAgYXN5bmMgcmVnaXN0ZXIoY29udGV4dCwgcGF5bG9hZCkgewogICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9pZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb20vdjEvYWNjb3VudHM6c2lnblVwP2tleT1BSXphU3lCcHZOajU2c19EQmlTbFhYVjlmSzZhaW1KSFFWS0JhaUUnLCB7CiAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgZW1haWw6IHBheWxvYWQuZW1haWwsCiAgICAgICAgcGFzc3dvcmQ6IHBheWxvYWQucGFzc3dvcmQsCiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUKICAgICAgfSkKICAgIH0pOwogICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgIGNvbnN0IGFkZGl0aW9uYWwgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9zdWJvdGljYS1pbmZvLTVlZTVhLWRlZmF1bHQtcnRkYi5ldXJvcGUtd2VzdDEuZmlyZWJhc2VkYXRhYmFzZS5hcHAvdXNlcnMuanNvbicsIHsKICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICB1c2VyVG9rZW46IGRhdGEuaWRUb2tlbiwKICAgICAgICB1c2VySWQ6IGRhdGEubG9jYWxJZCwKICAgICAgICB1c2VybmFtZTogcGF5bG9hZC51c2VybmFtZQogICAgICB9KQogICAgfSk7CiAgICBjb25zdCBhZGRpdGlvbmFsRGF0YSA9IGF3YWl0IGFkZGl0aW9uYWwuanNvbigpOwoKICAgIGlmICghcmVzcG9uc2Uub2spIHsKICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGRhdGEubWVzc2FnZSB8fCAnRmFpbGVkIHRvIGxvYWQnKTsKICAgICAgdGhyb3cgZXJyb3I7CiAgICB9CgogICAgY29uc3QgZXhwaXJlc0luID0gK2RhdGEuZXhwaXJlc0luICogMTAwMDsKICAgIGNvbnN0IGV4cGlyYXRpb25EYXRlID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBleHBpcmVzSW47CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCBkYXRhLmlkVG9rZW4pOwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJJZCcsIGRhdGEubG9jYWxJZCk7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW5FeHBpcmF0aW9uJywgZXhwaXJhdGlvbkRhdGUpOwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJOYW1lJywgYWRkaXRpb25hbERhdGEpOwogICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgY29udGV4dC5kaXNwYXRjaCgnbG9nb3V0Jyk7CiAgICB9LCBleHBpcmVzSW4pOwogICAgY29udGV4dC5jb21taXQoJ3NldFVzZXInLCB7CiAgICAgIHRva2VuOiBkYXRhLmlkVG9rZW4sCiAgICAgIHVzZXJJZDogZGF0YS5sb2NhbElkCiAgICB9KTsKICB9LAoKICBhc3luYyBsb2dpbihjb250ZXh0LCBwYXlsb2FkKSB7CiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2lkZW50aXR5dG9vbGtpdC5nb29nbGVhcGlzLmNvbS92MS9hY2NvdW50czpzaWduSW5XaXRoUGFzc3dvcmQ/a2V5PUFJemFTeUJwdk5qNTZzX0RCaVNsWFhWOWZLNmFpbUpIUVZLQmFpRScsIHsKICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICBlbWFpbDogcGF5bG9hZC5lbWFpbCwKICAgICAgICBwYXNzd29yZDogcGF5bG9hZC5wYXNzd29yZCwKICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZQogICAgICB9KQogICAgfSk7CiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwoKICAgIGlmICghcmVzcG9uc2Uub2spIHsKICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGRhdGEubWVzc2FnZSB8fCAnRmFpbGVkIHRvIGxvYWQnKTsKICAgICAgdGhyb3cgZXJyb3I7CiAgICB9CgogICAgY29uc3QgZXhwaXJlc0luID0gK2RhdGEuZXhwaXJlc0luICogMTAwMDsKICAgIGNvbnN0IGV4cGlyYXRpb25EYXRlID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBleHBpcmVzSW47CiAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBjb250ZXh0LmRpc3BhdGNoKCdsb2dvdXQnKTsKICAgIH0sIGV4cGlyZXNJbik7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCBkYXRhLmlkVG9rZW4pOwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJJZCcsIGRhdGEubG9jYWxJZCk7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW5FeHBpcmF0aW9uJywgZXhwaXJhdGlvbkRhdGUpOwogICAgY29udGV4dC5jb21taXQoJ3NldFVzZXInLCB7CiAgICAgIHRva2VuOiBkYXRhLmlkVG9rZW4sCiAgICAgIHVzZXJJZDogZGF0YS5sb2NhbElkCiAgICB9KTsKICB9LAoKICBhdXRvTG9naW4oY29udGV4dCkgewogICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKICAgIGNvbnN0IHVzZXJJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySWQnKTsKICAgIGNvbnN0IHRva2VuRXhwaXJhdGlvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbkV4cGlyYXRpb24nKTsKICAgIGNvbnN0IGV4cGlyZXNJbiA9ICt0b2tlbkV4cGlyYXRpb24gLSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKCiAgICBpZiAoZXhwaXJlc0luIDwgMTApIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnRleHQuZGlzcGF0Y2goJ2xvZ291dCcpOwogICAgfSwgZXhwaXJlc0luKTsKCiAgICBpZiAodG9rZW4gJiYgdXNlcklkKSB7CiAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRVc2VyJywgewogICAgICAgIHRva2VuOiB0b2tlbiwKICAgICAgICB1c2VySWQ6IHVzZXJJZAogICAgICB9KTsKICAgIH0KICB9LAoKICBsb2dvdXQoY29udGV4dCkgewogICAgY29udGV4dC5jb21taXQoJ2xvZ291dCcpOwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlcklkJyk7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW5FeHBpcmF0aW9uJyk7CiAgICBjbGVhclRpbWVvdXQodGltZXIpOwogIH0sCgogIGFzeW5jIGNvbW1lbnQoY29udGV4dCwgcGF5bG9hZCkgewogICAgaWYgKGNvbnRleHQuc3RhdGUudXNlcklkICE9IG51bGwpIHsKICAgICAgY29uc3QgcG9zdFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgiaHR0cHM6Ly9zdWJvdGljYS1pbmZvLTVlZTVhLWRlZmF1bHQtcnRkYi5ldXJvcGUtd2VzdDEuZmlyZWJhc2VkYXRhYmFzZS5hcHAvY29tbWVudHMuanNvbiIsIHsKICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICB1c2VyOiBjb250ZXh0LnN0YXRlLnVzZXJJZCwKICAgICAgICAgIGNvbW1lbnQ6IHBheWxvYWQuY29tbWVudCwKICAgICAgICAgIGFydGljbGVOaWQ6IHBheWxvYWQuYXJ0aWNsZU5pZCwKICAgICAgICAgIGlkOiBjb250ZXh0LnN0YXRlLnVzZXJJZCArIHBvc3RUaW1lCiAgICAgICAgfSkKICAgICAgfSk7CiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7CgogICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoZGF0YS5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gbG9hZCBjb21tZW50cycpOwogICAgICAgIHRocm93IGVycm9yOwogICAgICB9CiAgICB9IGVsc2UgYWxlcnQoIlBsZWFzZSBsb2dpbiB0byB5b3VyIGFjY291bnQsIG9yIGNyZWF0ZSBhIG5ldyBvbmUiKTsKICB9LAoKICBhc3luYyBsb2FkQ29tbWVudHMoY29udGV4dCwgcGF5bG9hZCkgewogICAgY29udGV4dC5zdGF0ZS5jb21tZW50cyA9IFtdOwogICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgiaHR0cHM6Ly9zdWJvdGljYS1pbmZvLTVlZTVhLWRlZmF1bHQtcnRkYi5ldXJvcGUtd2VzdDEuZmlyZWJhc2VkYXRhYmFzZS5hcHAvY29tbWVudHMuanNvbiIpOwogICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKCiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihkYXRhLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBsb2FkIGNvbW1lbnRzJyk7CiAgICAgIHRocm93IGVycm9yOwogICAgfQoKICAgIGNvbnN0IGNvbW1lbnRzID0gT2JqZWN0LnZhbHVlcyhkYXRhKTsKICAgIGNvbnRleHQuY29tbWl0KCdhZGRDb21tZW50JywgY29tbWVudHMuZmlsdGVyKGMgPT4gYy5hcnRpY2xlTmlkID09IHBheWxvYWQpKTsKICB9Cgp9Ow=="},{"version":3,"sources":["/home/icbtech/Documents/SuboticaInfo/src/components/store/auth/actions.js"],"names":["timer","register","context","payload","response","fetch","method","body","JSON","stringify","email","password","returnSecureToken","data","json","additional","userToken","idToken","userId","localId","username","additionalData","ok","console","log","error","Error","message","expiresIn","expirationDate","Date","getTime","localStorage","setItem","setTimeout","dispatch","commit","token","login","autoLogin","getItem","tokenExpiration","logout","removeItem","clearTimeout","comment","state","postTime","user","articleNid","id","alert","loadComments","comments","Object","values","filter","c"],"mappings":"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","sourcesContent":["let timer;\n\nexport default {\n    async register(context, payload) {\n        const response = await fetch('https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyBpvNj56s_DBiSlXXV9fK6aimJHQVKBaiE', {\n            method: 'POST',\n            body: JSON.stringify({\n                email: payload.email,\n                password: payload.password,\n                returnSecureToken: true\n            })\n        });\n\n        \n        const data = await response.json();\n        \n        const additional = await fetch('https://subotica-info-5ee5a-default-rtdb.europe-west1.firebasedatabase.app/users.json', {\n            method: 'POST',\n            body: JSON.stringify({\n                userToken: data.idToken,\n                userId: data.localId,\n                username: payload.username\n            })\n        });\n\n        const additionalData = await additional.json();\n        \n        if (!response.ok) {\n            console.log(data)\n            const error = new Error(data.message || 'Failed to load');\n            throw error;\n        }\n\n        const expiresIn = +data.expiresIn * 1000;\n        const expirationDate = new Date().getTime() + expiresIn;\n\n        localStorage.setItem('token', data.idToken);\n        localStorage.setItem('userId', data.localId);\n        localStorage.setItem('tokenExpiration', expirationDate);\n        localStorage.setItem('userName', additionalData);\n\n        timer = setTimeout(function () {\n            context.dispatch('logout');\n        }, expiresIn);\n\n        context.commit('setUser', {\n            token: data.idToken,\n            userId: data.localId,\n        })\n    },\n\n    async login(context, payload) {\n        const response = await fetch('https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBpvNj56s_DBiSlXXV9fK6aimJHQVKBaiE', {\n            method: 'POST',\n            body: JSON.stringify({\n                email: payload.email,\n                password: payload.password,\n                returnSecureToken: true\n            })\n        });\n\n        const data = await response.json();\n\n        if (!response.ok) {\n            console.log(data)\n            const error = new Error(data.message || 'Failed to load');\n            throw error;\n        }\n\n        const expiresIn = +data.expiresIn * 1000;\n        const expirationDate = new Date().getTime() + expiresIn;\n\n        timer = setTimeout(function () {\n            context.dispatch('logout');\n        }, expiresIn);\n\n        localStorage.setItem('token', data.idToken);\n        localStorage.setItem('userId', data.localId);\n        localStorage.setItem('tokenExpiration', expirationDate);\n\n        context.commit('setUser', {\n            token: data.idToken,\n            userId: data.localId,\n        })\n    },\n\n    autoLogin(context) {\n        const token = localStorage.getItem('token');\n        const userId = localStorage.getItem('userId');\n        const tokenExpiration = localStorage.getItem('tokenExpiration');\n\n        const expiresIn = + tokenExpiration - new Date().getTime();\n\n        if (expiresIn < 10) {\n            return;\n        }\n\n        timer = setTimeout(function () {\n            context.dispatch('logout');\n        }, expiresIn);\n\n        if (token && userId) {\n            context.commit('setUser', {\n                token: token,\n                userId: userId,\n            })\n        }\n    },\n\n    logout(context) {\n        context.commit('logout');\n        localStorage.removeItem('token');\n        localStorage.removeItem('userId');\n        localStorage.removeItem('tokenExpiration');\n\n        clearTimeout(timer);\n    },\n\n    async comment(context, payload) {\n        if (context.state.userId != null) {\n            const postTime = new Date().getTime();\n            const response = await fetch(\"https://subotica-info-5ee5a-default-rtdb.europe-west1.firebasedatabase.app/comments.json\", {\n                method: 'POST',\n                body: JSON.stringify({\n                    user: context.state.userId,\n                    comment: payload.comment,\n                    articleNid: payload.articleNid,\n                    id: context.state.userId + postTime\n                })\n            });\n\n            const data = await response.json();\n\n            if (!response.ok) {\n                console.log(data)\n                const error = new Error(data.message || 'Failed to load comments');\n                throw error;\n            }\n        }\n        else\n            alert(\"Please login to your account, or create a new one\");\n    },\n\n    async loadComments(context, payload) {\n        context.state.comments = [];\n        const response = await fetch(\"https://subotica-info-5ee5a-default-rtdb.europe-west1.firebasedatabase.app/comments.json\");\n\n        const data = await response.json();\n\n        if (!response.ok) {\n            console.log(data)\n            const error = new Error(data.message || 'Failed to load comments');\n            throw error;\n        }\n\n        const comments = Object.values(data);\n\n        context.commit('addComment', comments.filter(c => c.articleNid == payload));\n    }\n}"]}]}