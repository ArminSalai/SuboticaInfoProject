{"remainingRequest":"/home/icbtech/Documents/SuboticaInfoProject/node_modules/babel-loader/lib/index.js!/home/icbtech/Documents/SuboticaInfoProject/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/icbtech/Documents/SuboticaInfoProject/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/icbtech/Documents/SuboticaInfoProject/src/components/article/ArticleDetails.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/icbtech/Documents/SuboticaInfoProject/src/components/article/ArticleDetails.vue","mtime":1634905322256},{"path":"/home/icbtech/Documents/SuboticaInfoProject/node_modules/cache-loader/dist/cjs.js","mtime":1634882852328},{"path":"/home/icbtech/Documents/SuboticaInfoProject/node_modules/babel-loader/lib/index.js","mtime":1634882852296},{"path":"/home/icbtech/Documents/SuboticaInfoProject/node_modules/cache-loader/dist/cjs.js","mtime":1634882852328},{"path":"/home/icbtech/Documents/SuboticaInfoProject/node_modules/vue-loader-v16/dist/index.js","mtime":1634882853220}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgdXNlUm91dGUgfSBmcm9tICJ2dWUtcm91dGVyIjsKaW1wb3J0IHsgcmVmLCBvbk1vdW50ZWQsIGNvbXB1dGVkIH0gZnJvbSAidnVlIjsKaW1wb3J0IFNlY29uZGFyeUhlYWRlciBmcm9tICIuLi9VSS9TZWNvbmRhcnlIZWFkZXIudnVlIjsKaW1wb3J0IENvbW1lbnRJdGVtIGZyb20gIi4uL2FydGljbGUvQ29tbWVudEl0ZW0udnVlIjsKaW1wb3J0IFRoZUZvb3RlciBmcm9tICIuLi9VSS9UaGVGb290ZXIudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFNlY29uZGFyeUhlYWRlciwKICAgIFRoZUZvb3RlciwKICAgIENvbW1lbnRJdGVtCiAgfSwKCiAgc2V0dXAoKSB7CiAgICBjb25zdCBzdG9yZSA9IHVzZVN0b3JlKCk7CiAgICBjb25zdCByb3V0ZSA9IHVzZVJvdXRlKCk7CiAgICBjb25zdCBjb21tZW50ID0gcmVmKCIiKTsKCiAgICBhc3luYyBmdW5jdGlvbiBnZXRBcnRpY2xlKCkgewogICAgICBhd2FpdCBzdG9yZS5kaXNwYXRjaCgic2V0QXJ0aWNsZSIsIHJvdXRlLnBhcmFtcy5OaWQpOwogICAgICBsZXQgZGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2dhbGxlcnkiKTsKCiAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBldmFsKGdhbGxlcnkudmFsdWUpKSB7CiAgICAgICAgbGV0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwogICAgICAgIGltZy5zZXRBdHRyaWJ1dGUoInNyYyIsIGVsZW1lbnQuSW1hZ2UpOwogICAgICAgIGltZy5zZXRBdHRyaWJ1dGUoImFsdCIsIGVsZW1lbnQuQWx0KTsKICAgICAgICBpbWcuc2V0QXR0cmlidXRlKCJ0aXRsZSIsIGVsZW1lbnQuVGl0bGUpOwogICAgICAgIGltZy5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgIm0tMiIpOwogICAgICAgIGltZy5zdHlsZS53aWR0aCA9ICIxNXJlbSI7CiAgICAgICAgaW1nLnN0eWxlLmhlaWdodCA9ICIxMHJlbSI7CiAgICAgICAgaW1nLnN0eWxlLm9iamVjdEZpdCA9ICJjb3ZlciI7CiAgICAgICAgZGl2LmFwcGVuZENoaWxkKGltZyk7CiAgICAgIH0KICAgIH0KCiAgICBjb25zdCBhcnRpY2xlID0gY29tcHV0ZWQoKCkgPT4gewogICAgICByZXR1cm4gc3RvcmUuZ2V0dGVycy5nZXRBcnRpY2xlczsKICAgIH0pOwogICAgY29uc3QgY2F0ZWdvcnkgPSBjb21wdXRlZCgoKSA9PiBTdHJpbmcoYXJ0aWNsZS52YWx1ZS5LYXRlZ29yaWphKS5zdWJzdHJpbmcoMCwgMSkudG9VcHBlckNhc2UoKSArIFN0cmluZyhhcnRpY2xlLnZhbHVlLkthdGVnb3JpamEpLnN1YnN0cmluZygxKSk7CiAgICBjb25zdCB0aXRsZSA9IGNvbXB1dGVkKCgpID0+IGFydGljbGUudmFsdWUuTmFzbG92KTsKICAgIGNvbnN0IGRlc2MgPSBjb21wdXRlZCgoKSA9PiBhcnRpY2xlLnZhbHVlWyJTYWRyemFqIGNsYW5rYSJdKTsKICAgIGNvbnN0IGltYWdlID0gY29tcHV0ZWQoKCkgPT4gYXJ0aWNsZS52YWx1ZVsiVm9kZWNhIHNsaWthIl0pOwogICAgY29uc3QgZGF0ZSA9IGNvbXB1dGVkKCgpID0+IGFydGljbGUudmFsdWVbIlBvc3QgZGF0ZSJdKTsKICAgIGNvbnN0IGdhbGxlcnkgPSBjb21wdXRlZCgoKSA9PiBhcnRpY2xlLnZhbHVlWyJQaG90byBnYWxsZXJ5Il0pOwogICAgY29uc3QgdGFnb3ZpID0gY29tcHV0ZWQoKCkgPT4gYXJ0aWNsZS52YWx1ZS5UYWdvdmkpOwogICAgY29uc3QgbGljbm9zdGkgPSBjb21wdXRlZCgoKSA9PiBhcnRpY2xlLnZhbHVlLkxpY25vc3RpKTsKICAgIGNvbnN0IGF1dG9yID0gY29tcHV0ZWQoKCkgPT4gYXJ0aWNsZS52YWx1ZVsiQXV0b3IgdGVrc3RhIl0pOwogICAgY29uc3QgZm90b2dyYWYgPSBjb21wdXRlZCgoKSA9PiBhcnRpY2xlLnZhbHVlWyJGb3RvZ3JhZiJdKTsKICAgIGNvbnN0IGNvbW1lbnRzID0gY29tcHV0ZWQoKCkgPT4gewogICAgICByZXR1cm4gc3RvcmUuZ2V0dGVycy5nZXRDb21tZW50czsKICAgIH0pOwoKICAgIGFzeW5jIGZ1bmN0aW9uIHBvc3RDb21tZW50KCkgewogICAgICBpZiAoc3RvcmUuZ2V0dGVycy5nZXRVc2VyTmFtZSA9PSAiIikgewogICAgICAgIGFsZXJ0KCJQbGVhc2UgdHJ5IGxvZ2dpbmcgaW4gZmlyc3QiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGF3YWl0IHN0b3JlLmRpc3BhdGNoKCJjb21tZW50IiwgewogICAgICAgIGNvbW1lbnQ6IGNvbW1lbnQudmFsdWUsCiAgICAgICAgYXJ0aWNsZU5pZDogYXJ0aWNsZS52YWx1ZS5OaWQKICAgICAgfSk7CiAgICAgIGNvbW1lbnQudmFsdWUgPSAiIjsKICAgICAgc3RvcmUuZGlzcGF0Y2goImxvYWRDb21tZW50cyIsIGFydGljbGUudmFsdWUuTmlkKTsKICAgIH0KCiAgICBvbk1vdW50ZWQoYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICBhd2FpdCBnZXRBcnRpY2xlKCk7CiAgICAgIGF3YWl0IHN0b3JlLmRpc3BhdGNoKCJsb2FkQ29tbWVudHMiLCBhcnRpY2xlLnZhbHVlLk5pZCk7CiAgICB9KTsKICAgIHJldHVybiB7CiAgICAgIGNhdGVnb3J5LAogICAgICB0aXRsZSwKICAgICAgZGVzYywKICAgICAgaW1hZ2UsCiAgICAgIGRhdGUsCiAgICAgIHRhZ292aSwKICAgICAgbGljbm9zdGksCiAgICAgIGF1dG9yLAogICAgICBmb3RvZ3JhZiwKICAgICAgcG9zdENvbW1lbnQsCiAgICAgIGNvbW1lbnQsCiAgICAgIGNvbW1lbnRzCiAgICB9OwogIH0KCn07"},{"version":3,"sources":["/home/icbtech/Documents/SuboticaInfoProject/src/components/article/ArticleDetails.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <SecondaryHeader class=\"mb-5\" />\n  <div class=\"container-fluid w-75\">\n    <img :src=\"image\" class=\"img-fluid w-100\" alt=\"No Image Provided\" />\n    <br />\n    <span class=\"badge bg-danger text-light rounded-pill my-3\"\n      ><p class=\"m-0 pt-1 px-3\">{{ category }}</p></span\n    >\n    <h1>{{ title }}</h1>\n    <p class=\"text-danger\">{{ date }}</p>\n    <hr />\n    <p class=\"lead indented\">\n      {{ desc }}\n    </p>\n    <div id=\"gallery\"></div>\n    <p class=\"fw-bold mt-3\">\n      Tagovi: <span class=\"fw-light\">{{ tagovi }}</span>\n    </p>\n    <p class=\"fw-bold mt-3\">\n      Liƒçnosti: <span class=\"fw-light\">{{ licnosti }}</span>\n    </p>\n    <p class=\"fw-bold mt-3\">\n      Autor teksta: <span class=\"fw-light\">{{ autor }}</span>\n    </p>\n    <p class=\"fw-bold mt-3\">\n      Fotograf: <span class=\"fw-light\">{{ fotograf }}</span>\n    </p>\n  </div>\n  <div class=\"container-fluid w-75\">\n    <form @submit.prevent class=\"bg-dark text-light p-3 pb-5\">\n      <div class=\"row\">\n        <div class=\"col-2\"></div>\n        <div class=\"col-8\">\n          <label for=\"comment\" class=\"mb-1 text-secondary\">Kommentar:</label>\n          <textarea\n            v-model=\"comment\"\n            name=\"comment\"\n            id=\"comment\"\n            rows=\"2\"\n            class=\"form-control\"\n          ></textarea>\n        </div>\n        <div class=\"col d-flex align-items-end\">\n          <button class=\"btn btn-danger text-light pt-2\" @click=\"postComment\">\n            Poslaj\n          </button>\n        </div>\n      </div>\n    </form>\n    <ul class=\"bg-dark list-unstyled\">\n      <CommentItem\n        v-for=\"comm in comments\"\n        :key=\"comm.id\"\n        :username=\"comm.user\"\n        :comment=\"comm.comment\"\n        :likedBy=\"comm.likedBy\"\n        :dislikedBy=\"comm.dislikedBy\"\n        :id=\"comm.id\"\n      />\n    </ul>\n  </div>\n  <TheFooter />\n</template>\n\n<script>\nimport { useStore } from \"vuex\";\nimport { useRoute } from \"vue-router\";\nimport { ref, onMounted, computed } from \"vue\";\nimport SecondaryHeader from \"../UI/SecondaryHeader.vue\";\nimport CommentItem from \"../article/CommentItem.vue\";\nimport TheFooter from \"../UI/TheFooter.vue\";\n\nexport default {\n  components: {\n    SecondaryHeader,\n    TheFooter,\n    CommentItem,\n  },\n  setup() {\n    const store = useStore();\n    const route = useRoute();\n    const comment = ref(\"\");\n\n    async function getArticle() {\n      await store.dispatch(\"setArticle\", route.params.Nid);\n      let div = document.querySelector(\"#gallery\");\n      for (const element of eval(gallery.value)) {\n        let img = document.createElement(\"img\");\n        img.setAttribute(\"src\", element.Image);\n        img.setAttribute(\"alt\", element.Alt);\n        img.setAttribute(\"title\", element.Title);\n        img.setAttribute(\"class\", \"m-2\");\n        img.style.width = \"15rem\";\n        img.style.height = \"10rem\";\n        img.style.objectFit = \"cover\";\n        div.appendChild(img);\n      }\n    }\n\n    const article = computed(() => {\n      return store.getters.getArticles;\n    });\n\n    const category = computed(\n      () =>\n        String(article.value.Kategorija).substring(0, 1).toUpperCase() +\n        String(article.value.Kategorija).substring(1)\n    );\n    const title = computed(() => article.value.Naslov);\n    const desc = computed(() => article.value[\"Sadrzaj clanka\"]);\n    const image = computed(() => article.value[\"Vodeca slika\"]);\n    const date = computed(() => article.value[\"Post date\"]);\n    const gallery = computed(() => article.value[\"Photo gallery\"]);\n    const tagovi = computed(() => article.value.Tagovi);\n    const licnosti = computed(() => article.value.Licnosti);\n    const autor = computed(() => article.value[\"Autor teksta\"]);\n    const fotograf = computed(() => article.value[\"Fotograf\"]);\n\n    const comments = computed(() => {\n      return store.getters.getComments;\n    });\n\n    async function postComment() {\n      if(store.getters.getUserName == \"\") {\n        alert(\"Please try logging in first\");\n        return;\n      }\n      await store.dispatch(\"comment\", {\n        comment: comment.value,\n        articleNid: article.value.Nid,\n      });\n      comment.value = \"\";\n      store.dispatch(\"loadComments\", article.value.Nid);\n    }\n\n    onMounted(async function () {\n      await getArticle();\n      await store.dispatch(\"loadComments\", article.value.Nid);\n    });\n\n    return {\n      category,\n      title,\n      desc,\n      image,\n      date,\n      tagovi,\n      licnosti,\n      autor,\n      fotograf,\n      postComment,\n      comment,\n      comments,\n    };\n  },\n};\n</script>"],"sourceRoot":""}]}