{"remainingRequest":"/home/icbtech/Documents/SuboticaInfoProject/node_modules/babel-loader/lib/index.js!/home/icbtech/Documents/SuboticaInfoProject/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/icbtech/Documents/SuboticaInfoProject/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/icbtech/Documents/SuboticaInfoProject/src/components/article/CommentItem.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/icbtech/Documents/SuboticaInfoProject/src/components/article/CommentItem.vue","mtime":1634903525932},{"path":"/home/icbtech/Documents/SuboticaInfoProject/node_modules/cache-loader/dist/cjs.js","mtime":1634882852328},{"path":"/home/icbtech/Documents/SuboticaInfoProject/node_modules/babel-loader/lib/index.js","mtime":1634882852296},{"path":"/home/icbtech/Documents/SuboticaInfoProject/node_modules/cache-loader/dist/cjs.js","mtime":1634882852328},{"path":"/home/icbtech/Documents/SuboticaInfoProject/node_modules/vue-loader-v16/dist/index.js","mtime":1634882853220}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY29tcHV0ZWQsIG9uTW91bnRlZCwgcmVmIH0gZnJvbSAidnVlIjsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgdXNlUm91dGUgfSBmcm9tICJ2dWUtcm91dGVyIjsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiBbInVzZXJuYW1lIiwgImNvbW1lbnQiLCAibGlrZWRCeSIsICJkaXNsaWtlZEJ5IiwgImlkIl0sCgogIHNldHVwKHByb3BzKSB7CiAgICBjb25zdCBzdG9yZSA9IHVzZVN0b3JlKCk7CiAgICBjb25zdCByb3V0ZSA9IHVzZVJvdXRlKCk7CiAgICBjb25zdCBsaWtlQ291bnQgPSBjb21wdXRlZCgoKSA9PiB7CiAgICAgIHJldHVybiBwcm9wcy5saWtlZEJ5Lmxlbmd0aCAtIDE7CiAgICB9KTsKICAgIGNvbnN0IGRpc2xpa2VDb3VudCA9IGNvbXB1dGVkKCgpID0+IHsKICAgICAgcmV0dXJuIHByb3BzLmRpc2xpa2VkQnkubGVuZ3RoIC0gMTsKICAgIH0pOwogICAgY29uc3QgUHJvZmlsZUxldHRlciA9IHJlZihwcm9wcy51c2VybmFtZSk7CiAgICBQcm9maWxlTGV0dGVyLnZhbHVlID0gUHJvZmlsZUxldHRlci52YWx1ZVswXS50b1VwcGVyQ2FzZSgpOwogICAgY29uc3QgbGlrZWQgPSByZWYoZmFsc2UpOwoKICAgIGFzeW5jIGZ1bmN0aW9uIGxpa2VDb21tZW50KCkgewogICAgICBpZiAoc3RvcmUuZ2V0dGVycy5nZXRVc2VyTmFtZSA9PSAiIikgewogICAgICAgIGFsZXJ0KCJQbGVhc2UgdHJ5IGxvZ2dpbmcgaW4gZmlyc3QiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGF3YWl0IHN0b3JlLmRpc3BhdGNoKCJsaWtlQ29tbWVudCIsIHByb3BzLmlkKTsKICAgICAgYXdhaXQgc3RvcmUuZGlzcGF0Y2goImxvYWRDb21tZW50cyIsIHJvdXRlLnBhcmFtcy5OaWQpOwogICAgfQoKICAgIGNvbnN0IGRpc2xpa2VkID0gcmVmKGZhbHNlKTsKCiAgICBhc3luYyBmdW5jdGlvbiBkaXNsaWtlQ29tbWVudCgpIHsKICAgICAgaWYgKHN0b3JlLmdldHRlcnMuZ2V0VXNlck5hbWUgPT0gIiIpIHsKICAgICAgICBhbGVydCgiUGxlYXNlIHRyeSBsb2dnaW5nIGluIGZpcnN0Iik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBhd2FpdCBzdG9yZS5kaXNwYXRjaCgiZGlzbGlrZUNvbW1lbnQiLCBwcm9wcy5pZCk7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCJsb2FkQ29tbWVudHMiLCByb3V0ZS5wYXJhbXMuTmlkKTsKICAgIH0KCiAgICBvbk1vdW50ZWQoKCkgPT4gewogICAgICBpZiAocHJvcHMubGlrZWRCeS5maW5kKGxCID0+IGxCID09IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySWQnKSkgIT0gdW5kZWZpbmVkKSBsaWtlZC52YWx1ZSA9IHRydWU7CiAgICAgIGlmIChwcm9wcy5kaXNsaWtlZEJ5LmZpbmQobEIgPT4gbEIgPT0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpKSAhPSB1bmRlZmluZWQpIGRpc2xpa2VkLnZhbHVlID0gdHJ1ZTsKICAgIH0pOwogICAgcmV0dXJuIHsKICAgICAgUHJvZmlsZUxldHRlciwKICAgICAgbGlrZUNvbW1lbnQsCiAgICAgIGxpa2VDb3VudCwKICAgICAgZGlzbGlrZUNvdW50LAogICAgICBkaXNsaWtlQ29tbWVudCwKICAgICAgbGlrZWQsCiAgICAgIGRpc2xpa2VkCiAgICB9OwogIH0KCn07"},{"version":3,"sources":["/home/icbtech/Documents/SuboticaInfoProject/src/components/article/CommentItem.vue"],"names":[],"mappings":"AAgCA,SAAS,QAAT,EAAmB,SAAnB,EAA8B,GAA9B,QAAyC,KAAzC;AACA,SAAS,QAAT,QAAyB,MAAzB;AACA,SAAS,QAAT,QAAyB,YAAzB;AACA,eAAe;AACb,EAAA,KAAK,EAAE,CAAC,UAAD,EAAa,SAAb,EAAwB,SAAxB,EAAmC,YAAnC,EAAiD,IAAjD,CADM;;AAEb,EAAA,KAAK,CAAC,KAAD,EAAQ;AACX,UAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,UAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,UAAM,SAAQ,GAAI,QAAQ,CAAC,MAAM;AAC/B,aAAO,KAAK,CAAC,OAAN,CAAc,MAAd,GAAuB,CAA9B;AACD,KAFyB,CAA1B;AAGA,UAAM,YAAW,GAAI,QAAQ,CAAC,MAAM;AAClC,aAAO,KAAK,CAAC,UAAN,CAAiB,MAAjB,GAA0B,CAAjC;AACD,KAF4B,CAA7B;AAGA,UAAM,aAAY,GAAI,GAAG,CAAC,KAAK,CAAC,QAAP,CAAzB;AACA,IAAA,aAAa,CAAC,KAAd,GAAsB,aAAa,CAAC,KAAd,CAAoB,CAApB,EAAuB,WAAvB,EAAtB;AAGA,UAAM,KAAI,GAAI,GAAG,CAAC,KAAD,CAAjB;;AAEA,mBAAe,WAAf,GAA6B;AAC3B,UAAG,KAAK,CAAC,OAAN,CAAc,WAAd,IAA6B,EAAhC,EAAoC;AAClC,QAAA,KAAK,CAAC,6BAAD,CAAL;AACA;AACF;;AACA,YAAM,KAAK,CAAC,QAAN,CAAe,aAAf,EAA8B,KAAK,CAAC,EAApC,CAAN;AACA,YAAM,KAAK,CAAC,QAAN,CAAe,cAAf,EAA+B,KAAK,CAAC,MAAN,CAAa,GAA5C,CAAN;AACF;;AAEA,UAAM,QAAO,GAAI,GAAG,CAAC,KAAD,CAApB;;AAEA,mBAAe,cAAf,GAAgC;AAC9B,UAAG,KAAK,CAAC,OAAN,CAAc,WAAd,IAA6B,EAAhC,EAAoC;AAClC,QAAA,KAAK,CAAC,6BAAD,CAAL;AACA;AACF;;AACA,YAAM,KAAK,CAAC,QAAN,CAAe,gBAAf,EAAiC,KAAK,CAAC,EAAvC,CAAN;AACA,MAAA,KAAK,CAAC,QAAN,CAAe,cAAf,EAA+B,KAAK,CAAC,MAAN,CAAa,GAA5C;AACF;;AAEA,IAAA,SAAS,CAAC,MAAM;AACd,UAAG,KAAK,CAAC,OAAN,CAAc,IAAd,CAAmB,EAAC,IAAK,EAAC,IAAK,YAAY,CAAC,OAAb,CAAqB,QAArB,CAA/B,KAAkE,SAArE,EACE,KAAK,CAAC,KAAN,GAAc,IAAd;AACF,UAAG,KAAK,CAAC,UAAN,CAAiB,IAAjB,CAAsB,EAAC,IAAK,EAAC,IAAK,YAAY,CAAC,OAAb,CAAqB,QAArB,CAAlC,KAAqE,SAAxE,EACE,QAAQ,CAAC,KAAT,GAAiB,IAAjB;AACH,KALQ,CAAT;AAOA,WAAO;AACL,MAAA,aADK;AAEL,MAAA,WAFK;AAGL,MAAA,SAHK;AAIL,MAAA,YAJK;AAKL,MAAA,cALK;AAML,MAAA,KANK;AAOL,MAAA;AAPK,KAAP;AASD;;AArDY,CAAf","sourcesContent":["<template>\n  <li class=\"p-4\">\n    <div class=\"row\">\n      <div class=\"col-2 d-flex justify-content-center align-items-center\">\n        <span\n          class=\"\n            bg-danger\n            profilePic\n            pt-2\n          \"\n          >{{ ProfileLetter }}</span\n        >\n      </div>\n      <div class=\"col-8 d-flex flex-column\">\n        <h4 class=\"text-secondary\">{{ username }}</h4>\n        <p class=\"text-light\">\n          {{ comment }}\n        </p>\n      </div>\n      <div class=\"col d-flex flex-column justify-content-center\">\n        <div class=\"likeButton mb-2\" alt=\"like\" :class=\"liked?'bg-danger' : ''\" @click=\"likeComment\"></div>\n        <p class=\"likeText\" :class=\"liked?'text-danger' : 'text-light'\" v-if=\"likeCount\">{{ likeCount }}</p>\n        <div class=\"dislikeButton\" alt=\"like\" :class=\"disliked?'bg-danger' : ''\" @click=\"dislikeComment\"></div>\n        <p class=\"likeText\" :class=\"disliked?'text-danger' : 'text-light'\" v-if=\"dislikeCount\">\n          {{ dislikeCount }}\n        </p>\n      </div>\n    </div>\n  </li>\n</template>\n\n<script>\nimport { computed, onMounted, ref } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { useRoute } from \"vue-router\";\nexport default {\n  props: [\"username\", \"comment\", \"likedBy\", \"dislikedBy\", \"id\"],\n  setup(props) {\n    const store = useStore();\n    const route = useRoute();\n    const likeCount = computed(() => {\n      return props.likedBy.length - 1;\n    });\n    const dislikeCount = computed(() => {\n      return props.dislikedBy.length - 1;\n    });\n    const ProfileLetter = ref(props.username);\n    ProfileLetter.value = ProfileLetter.value[0].toUpperCase();\n\n    \n    const liked = ref(false);\n    \n    async function likeComment() {\n      if(store.getters.getUserName == \"\") {\n        alert(\"Please try logging in first\");\n        return;\n      }\n      await store.dispatch(\"likeComment\", props.id);\n      await store.dispatch(\"loadComments\", route.params.Nid);\n    }\n\n    const disliked = ref(false);\n\n    async function dislikeComment() {\n      if(store.getters.getUserName == \"\") {\n        alert(\"Please try logging in first\");\n        return;\n      }\n      await store.dispatch(\"dislikeComment\", props.id);\n      store.dispatch(\"loadComments\", route.params.Nid);\n    }\n\n    onMounted(() => {\n      if(props.likedBy.find(lB => lB == localStorage.getItem('userId')) != undefined)\n        liked.value = true;\n      if(props.dislikedBy.find(lB => lB == localStorage.getItem('userId')) != undefined)\n        disliked.value = true;\n    })\n\n    return {\n      ProfileLetter,\n      likeComment,\n      likeCount,\n      dislikeCount,\n      dislikeComment,\n      liked,\n      disliked\n    };\n  },\n};\n</script>"],"sourceRoot":""}]}