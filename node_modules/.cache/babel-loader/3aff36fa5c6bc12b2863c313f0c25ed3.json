{"remainingRequest":"/home/icbtech/Documents/SuboticaInfoProject/node_modules/babel-loader/lib/index.js!/home/icbtech/Documents/SuboticaInfoProject/node_modules/eslint-loader/index.js??ref--13-0!/home/icbtech/Documents/SuboticaInfoProject/src/components/store/auth/actions.js","dependencies":[{"path":"/home/icbtech/Documents/SuboticaInfoProject/src/components/store/auth/actions.js","mtime":1634899176812},{"path":"/home/icbtech/Documents/SuboticaInfoProject/node_modules/cache-loader/dist/cjs.js","mtime":1634882852328},{"path":"/home/icbtech/Documents/SuboticaInfoProject/node_modules/babel-loader/lib/index.js","mtime":1634882852296},{"path":"/home/icbtech/Documents/SuboticaInfoProject/node_modules/eslint-loader/index.js","mtime":1634882852528}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:bGV0IHRpbWVyOwpleHBvcnQgZGVmYXVsdCB7CiAgYXN5bmMgcmVnaXN0ZXIoY29udGV4dCwgcGF5bG9hZCkgewogICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9pZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb20vdjEvYWNjb3VudHM6c2lnblVwP2tleT1BSXphU3lCcHZOajU2c19EQmlTbFhYVjlmSzZhaW1KSFFWS0JhaUUnLCB7CiAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgZW1haWw6IHBheWxvYWQuZW1haWwsCiAgICAgICAgcGFzc3dvcmQ6IHBheWxvYWQucGFzc3dvcmQsCiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUKICAgICAgfSkKICAgIH0pOwogICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgIGNvbnN0IGFkZGl0aW9uYWwgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9zdWJvdGljYS1pbmZvLTVlZTVhLWRlZmF1bHQtcnRkYi5ldXJvcGUtd2VzdDEuZmlyZWJhc2VkYXRhYmFzZS5hcHAvdXNlcnMuanNvbicsIHsKICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICB1c2VySWQ6IGRhdGEubG9jYWxJZCwKICAgICAgICB1c2VybmFtZTogcGF5bG9hZC51c2VybmFtZQogICAgICB9KQogICAgfSk7CgogICAgaWYgKCFhZGRpdGlvbmFsLm9rKSB7CiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihkYXRhLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBzZXQgdXNlcm5hbWUnKTsKICAgICAgdGhyb3cgZXJyb3I7CiAgICB9CgogICAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKCdodHRwczovL3N1Ym90aWNhLWluZm8tNWVlNWEtZGVmYXVsdC1ydGRiLmV1cm9wZS13ZXN0MS5maXJlYmFzZWRhdGFiYXNlLmFwcC91c2Vycy5qc29uJyk7CiAgICBjb25zdCBhZGRpdGlvbmFsRGF0YSA9IGF3YWl0IHJlc3AuanNvbigpOwogICAgbGV0IHVzZXJLZXk7CgogICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoYWRkaXRpb25hbERhdGEpKSB7CiAgICAgIGlmIChhZGRpdGlvbmFsRGF0YVtrZXldLnVzZXJJZCA9PSBkYXRhLmxvY2FsSWQpIHVzZXJLZXkgPSBrZXk7CiAgICB9CgogICAgY29uc3QgVXNlck5hbWUgPSBhZGRpdGlvbmFsRGF0YVt1c2VyS2V5XS51c2VybmFtZTsKCiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihkYXRhLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBsb2FkJyk7CiAgICAgIHRocm93IGVycm9yOwogICAgfQoKICAgIGNvbnN0IGV4cGlyZXNJbiA9ICtkYXRhLmV4cGlyZXNJbiAqIDEwMDA7CiAgICBjb25zdCBleHBpcmF0aW9uRGF0ZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgZXhwaXJlc0luOwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgZGF0YS5pZFRva2VuKTsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VySWQnLCBkYXRhLmxvY2FsSWQpOwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuRXhwaXJhdGlvbicsIGV4cGlyYXRpb25EYXRlKTsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyTmFtZScsIFVzZXJOYW1lKTsKICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnRleHQuZGlzcGF0Y2goJ2xvZ291dCcpOwogICAgfSwgZXhwaXJlc0luKTsKICAgIGNvbnRleHQuY29tbWl0KCdzZXRVc2VyJywgewogICAgICB0b2tlbjogZGF0YS5pZFRva2VuLAogICAgICB1c2VySWQ6IGRhdGEubG9jYWxJZCwKICAgICAgdXNlck5hbWU6IFVzZXJOYW1lCiAgICB9KTsKICB9LAoKICBhc3luYyBsb2dpbihjb250ZXh0LCBwYXlsb2FkKSB7CiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2lkZW50aXR5dG9vbGtpdC5nb29nbGVhcGlzLmNvbS92MS9hY2NvdW50czpzaWduSW5XaXRoUGFzc3dvcmQ/a2V5PUFJemFTeUJwdk5qNTZzX0RCaVNsWFhWOWZLNmFpbUpIUVZLQmFpRScsIHsKICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICBlbWFpbDogcGF5bG9hZC5lbWFpbCwKICAgICAgICBwYXNzd29yZDogcGF5bG9hZC5wYXNzd29yZCwKICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZQogICAgICB9KQogICAgfSk7CiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKCdodHRwczovL3N1Ym90aWNhLWluZm8tNWVlNWEtZGVmYXVsdC1ydGRiLmV1cm9wZS13ZXN0MS5maXJlYmFzZWRhdGFiYXNlLmFwcC91c2Vycy5qc29uJyk7CiAgICBjb25zdCBhZGRpdGlvbmFsRGF0YSA9IGF3YWl0IHJlc3AuanNvbigpOwogICAgbGV0IHVzZXJLZXk7CgogICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoYWRkaXRpb25hbERhdGEpKSB7CiAgICAgIGlmIChhZGRpdGlvbmFsRGF0YVtrZXldLnVzZXJJZCA9PSBkYXRhLmxvY2FsSWQpIHVzZXJLZXkgPSBrZXk7CiAgICB9CgogICAgY29uc3QgVXNlck5hbWUgPSBhZGRpdGlvbmFsRGF0YVt1c2VyS2V5XS51c2VybmFtZTsKCiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihkYXRhLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBsb2FkJyk7CiAgICAgIHRocm93IGVycm9yOwogICAgfQoKICAgIGNvbnN0IGV4cGlyZXNJbiA9ICtkYXRhLmV4cGlyZXNJbiAqIDEwMDA7CiAgICBjb25zdCBleHBpcmF0aW9uRGF0ZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgZXhwaXJlc0luOwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgZGF0YS5pZFRva2VuKTsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VySWQnLCBkYXRhLmxvY2FsSWQpOwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuRXhwaXJhdGlvbicsIGV4cGlyYXRpb25EYXRlKTsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyTmFtZScsIFVzZXJOYW1lKTsKICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnRleHQuZGlzcGF0Y2goJ2xvZ291dCcpOwogICAgfSwgZXhwaXJlc0luKTsKICAgIGNvbnRleHQuY29tbWl0KCdzZXRVc2VyJywgewogICAgICB0b2tlbjogZGF0YS5pZFRva2VuLAogICAgICB1c2VySWQ6IGRhdGEubG9jYWxJZCwKICAgICAgdXNlck5hbWU6IFVzZXJOYW1lCiAgICB9KTsKICB9LAoKICBhdXRvTG9naW4oY29udGV4dCkgewogICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKICAgIGNvbnN0IHVzZXJJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySWQnKTsKICAgIGNvbnN0IHVzZXJOYW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJOYW1lJyk7CiAgICBjb25zdCB0b2tlbkV4cGlyYXRpb24gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW5FeHBpcmF0aW9uJyk7CiAgICBjb25zdCBleHBpcmVzSW4gPSArdG9rZW5FeHBpcmF0aW9uIC0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CgogICAgaWYgKGV4cGlyZXNJbiA8IDEwKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBjb250ZXh0LmRpc3BhdGNoKCdsb2dvdXQnKTsKICAgIH0sIGV4cGlyZXNJbik7CgogICAgaWYgKHRva2VuICYmIHVzZXJJZCkgewogICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VXNlcicsIHsKICAgICAgICB0b2tlbjogdG9rZW4sCiAgICAgICAgdXNlcklkOiB1c2VySWQsCiAgICAgICAgdXNlck5hbWU6IHVzZXJOYW1lCiAgICAgIH0pOwogICAgfQogIH0sCgogIGxvZ291dChjb250ZXh0KSB7CiAgICBjb250ZXh0LmNvbW1pdCgnbG9nb3V0Jyk7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VySWQnKTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VyTmFtZScpOwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuRXhwaXJhdGlvbicpOwogICAgY2xlYXJUaW1lb3V0KHRpbWVyKTsKICB9LAoKICBhc3luYyBjb21tZW50KGNvbnRleHQsIHBheWxvYWQpIHsKICAgIGlmIChjb250ZXh0LnN0YXRlLnVzZXJJZCAhPSBudWxsKSB7CiAgICAgIGNvbnN0IHBvc3RUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goImh0dHBzOi8vc3Vib3RpY2EtaW5mby01ZWU1YS1kZWZhdWx0LXJ0ZGIuZXVyb3BlLXdlc3QxLmZpcmViYXNlZGF0YWJhc2UuYXBwL2NvbW1lbnRzLmpzb24iLCB7CiAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgdXNlcjogY29udGV4dC5zdGF0ZS51c2VyTmFtZSwKICAgICAgICAgIGNvbW1lbnQ6IHBheWxvYWQuY29tbWVudCwKICAgICAgICAgIGFydGljbGVOaWQ6IHBheWxvYWQuYXJ0aWNsZU5pZCwKICAgICAgICAgIGlkOiBjb250ZXh0LnN0YXRlLnVzZXJJZCArIHBvc3RUaW1lLAogICAgICAgICAgbGlrZWRCeTogWyIiXSwKICAgICAgICAgIGRpc2xpa2VkQnk6IFsiIl0KICAgICAgICB9KQogICAgICB9KTsKICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKCiAgICAgIGlmICghcmVzcG9uc2Uub2spIHsKICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihkYXRhLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBwb3N0IGNvbW1lbnQnKTsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfQogICAgfSBlbHNlIGFsZXJ0KCJQbGVhc2UgbG9naW4gdG8geW91ciBhY2NvdW50LCBvciBjcmVhdGUgYSBuZXcgb25lIik7CiAgfSwKCiAgYXN5bmMgbGlrZUNvbW1lbnQoXywgcGF5bG9hZCkgewogICAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKCdodHRwczovL3N1Ym90aWNhLWluZm8tNWVlNWEtZGVmYXVsdC1ydGRiLmV1cm9wZS13ZXN0MS5maXJlYmFzZWRhdGFiYXNlLmFwcC9jb21tZW50cy5qc29uJyk7CiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcC5qc29uKCk7CiAgICBjb25zdCB1c2VyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpOwogICAgbGV0IGxpa2VkS2V5OwoKICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGRhdGEpKSB7CiAgICAgIGlmIChkYXRhW2tleV0uaWQgPT0gcGF5bG9hZCkgbGlrZWRLZXkgPSBrZXk7CiAgICB9CgogICAgaWYgKGRhdGFbbGlrZWRLZXldLmxpa2VkQnkuZmluZChsQiA9PiBsQiA9PSB1c2VyKSkgZGF0YVtsaWtlZEtleV0ubGlrZWRCeS5wb3AodXNlcik7ZWxzZSBkYXRhW2xpa2VkS2V5XS5saWtlZEJ5LnB1c2godXNlcik7CiAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9zdWJvdGljYS1pbmZvLTVlZTVhLWRlZmF1bHQtcnRkYi5ldXJvcGUtd2VzdDEuZmlyZWJhc2VkYXRhYmFzZS5hcHAvY29tbWVudHMuanNvbicsIHsKICAgICAgbWV0aG9kOiAnUFVUJywKICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSkKICAgIH0pOwogIH0sCgogIGFzeW5jIGRpc2xpa2VDb21tZW50KF8sIHBheWxvYWQpIHsKICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9zdWJvdGljYS1pbmZvLTVlZTVhLWRlZmF1bHQtcnRkYi5ldXJvcGUtd2VzdDEuZmlyZWJhc2VkYXRhYmFzZS5hcHAvY29tbWVudHMuanNvbicpOwogICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3AuanNvbigpOwogICAgY29uc3QgdXNlciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySWQnKTsKICAgIGxldCBkaXNsaWtlZEtleTsKCiAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhkYXRhKSkgewogICAgICBpZiAoZGF0YVtrZXldLmlkID09IHBheWxvYWQpIGRpc2xpa2VkS2V5ID0ga2V5OwogICAgfQoKICAgIGlmIChkYXRhW2Rpc2xpa2VkS2V5XS5kaXNsaWtlZEJ5LmZpbmQobEIgPT4gbEIgPT0gdXNlcikpIGRhdGFbZGlzbGlrZWRLZXldLmRpc2xpa2VkQnkucG9wKHVzZXIpO2Vsc2UgaWYgKGRhdGFbZGlzbGlrZWRLZXldLmxpa2VkQnkuZmluZChsQiA9PiBsQiA9PSB1c2VyKSkgewogICAgICBkYXRhW2Rpc2xpa2VkS2V5XS5saWtlZEJ5LnBvcCh1c2VyKTsKICAgICAgZGF0YVtkaXNsaWtlZEtleV07CiAgICB9IGVsc2UgZGF0YVtkaXNsaWtlZEtleV0uZGlzbGlrZWRCeS5wdXNoKHVzZXIpOwogICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vc3Vib3RpY2EtaW5mby01ZWU1YS1kZWZhdWx0LXJ0ZGIuZXVyb3BlLXdlc3QxLmZpcmViYXNlZGF0YWJhc2UuYXBwL2NvbW1lbnRzLmpzb24nLCB7CiAgICAgIG1ldGhvZDogJ1BVVCcsCiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpCiAgICB9KTsKICB9LAoKICBhc3luYyBsb2FkQ29tbWVudHMoY29udGV4dCwgcGF5bG9hZCkgewogICAgY29udGV4dC5zdGF0ZS5jb21tZW50cyA9IFtdOwogICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgiaHR0cHM6Ly9zdWJvdGljYS1pbmZvLTVlZTVhLWRlZmF1bHQtcnRkYi5ldXJvcGUtd2VzdDEuZmlyZWJhc2VkYXRhYmFzZS5hcHAvY29tbWVudHMuanNvbiIpOwogICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKCiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihkYXRhLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBsb2FkIGNvbW1lbnRzJyk7CiAgICAgIHRocm93IGVycm9yOwogICAgfQoKICAgIGNvbnN0IGNvbW1lbnRzID0gT2JqZWN0LnZhbHVlcyhkYXRhKTsKICAgIGNvbnRleHQuY29tbWl0KCdhZGRDb21tZW50JywgY29tbWVudHMuZmlsdGVyKGMgPT4gYy5hcnRpY2xlTmlkID09IHBheWxvYWQpKTsKICB9Cgp9Ow=="},{"version":3,"sources":["/home/icbtech/Documents/SuboticaInfoProject/src/components/store/auth/actions.js"],"names":["timer","register","context","payload","response","fetch","method","body","JSON","stringify","email","password","returnSecureToken","data","json","additional","userId","localId","username","ok","console","log","error","Error","message","resp","additionalData","userKey","key","Object","keys","UserName","expiresIn","expirationDate","Date","getTime","localStorage","setItem","idToken","setTimeout","dispatch","commit","token","userName","login","autoLogin","getItem","tokenExpiration","logout","removeItem","clearTimeout","comment","state","postTime","user","articleNid","id","likedBy","dislikedBy","alert","likeComment","_","likedKey","find","lB","pop","push","dislikeComment","dislikedKey","loadComments","comments","values","filter","c"],"mappings":"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","sourcesContent":["let timer;\n\nexport default {\n    async register(context, payload) {\n        const response = await fetch('https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyBpvNj56s_DBiSlXXV9fK6aimJHQVKBaiE', {\n            method: 'POST',\n            body: JSON.stringify({\n                email: payload.email,\n                password: payload.password,\n                returnSecureToken: true\n            })\n        });\n\n        const data = await response.json();\n\n        const additional = await fetch('https://subotica-info-5ee5a-default-rtdb.europe-west1.firebasedatabase.app/users.json', {\n            method: 'POST',\n            body: JSON.stringify({\n                userId: data.localId,\n                username: payload.username\n            })\n        });\n\n        if (!additional.ok) {\n            console.log(data);\n            const error = new Error(data.message || 'Failed to set username');\n            throw error;\n        }\n\n        const resp = await fetch('https://subotica-info-5ee5a-default-rtdb.europe-west1.firebasedatabase.app/users.json');\n\n        const additionalData = await resp.json();\n\n        let userKey;\n\n        for (const key of Object.keys(additionalData)) {\n            if (additionalData[key].userId == data.localId) userKey = key;\n        }\n\n        const UserName = additionalData[userKey].username;\n\n        if (!response.ok) {\n            console.log(data)\n            const error = new Error(data.message || 'Failed to load');\n            throw error;\n        }\n\n        const expiresIn = +data.expiresIn * 1000;\n        const expirationDate = new Date().getTime() + expiresIn;\n\n        localStorage.setItem('token', data.idToken);\n        localStorage.setItem('userId', data.localId);\n        localStorage.setItem('tokenExpiration', expirationDate);\n        localStorage.setItem('userName', UserName);\n\n        timer = setTimeout(function () {\n            context.dispatch('logout');\n        }, expiresIn);\n\n        context.commit('setUser', {\n            token: data.idToken,\n            userId: data.localId,\n            userName: UserName\n        })\n    },\n\n    async login(context, payload) {\n        const response = await fetch('https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBpvNj56s_DBiSlXXV9fK6aimJHQVKBaiE', {\n            method: 'POST',\n            body: JSON.stringify({\n                email: payload.email,\n                password: payload.password,\n                returnSecureToken: true\n            })\n        });\n\n        const data = await response.json();\n\n        const resp = await fetch('https://subotica-info-5ee5a-default-rtdb.europe-west1.firebasedatabase.app/users.json');\n\n        const additionalData = await resp.json();\n\n        let userKey;\n\n        for (const key of Object.keys(additionalData)) {\n            if (additionalData[key].userId == data.localId) userKey = key;\n        }\n\n        const UserName = additionalData[userKey].username;\n\n        if (!response.ok) {\n            console.log(data)\n            const error = new Error(data.message || 'Failed to load');\n            throw error;\n        }\n\n        const expiresIn = +data.expiresIn * 1000;\n        const expirationDate = new Date().getTime() + expiresIn;\n\n        localStorage.setItem('token', data.idToken);\n        localStorage.setItem('userId', data.localId);\n        localStorage.setItem('tokenExpiration', expirationDate);\n        localStorage.setItem('userName', UserName);\n\n        timer = setTimeout(function () {\n            context.dispatch('logout');\n        }, expiresIn);\n\n        context.commit('setUser', {\n            token: data.idToken,\n            userId: data.localId,\n            userName: UserName\n        })\n    },\n\n    autoLogin(context) {\n        const token = localStorage.getItem('token');\n        const userId = localStorage.getItem('userId');\n        const userName = localStorage.getItem('userName');\n        const tokenExpiration = localStorage.getItem('tokenExpiration');\n\n        const expiresIn = + tokenExpiration - new Date().getTime();\n\n        if (expiresIn < 10) {\n            return;\n        }\n\n        timer = setTimeout(function () {\n            context.dispatch('logout');\n        }, expiresIn);\n\n        if (token && userId) {\n            context.commit('setUser', {\n                token: token,\n                userId: userId,\n                userName: userName\n            })\n        }\n    },\n\n    logout(context) {\n        context.commit('logout');\n        localStorage.removeItem('token');\n        localStorage.removeItem('userId');\n        localStorage.removeItem('userName');\n        localStorage.removeItem('tokenExpiration');\n\n        clearTimeout(timer);\n    },\n\n    async comment(context, payload) {\n        if (context.state.userId != null) {\n            const postTime = new Date().getTime();\n            const response = await fetch(\"https://subotica-info-5ee5a-default-rtdb.europe-west1.firebasedatabase.app/comments.json\", {\n                method: 'POST',\n                body: JSON.stringify({\n                    user: context.state.userName,\n                    comment: payload.comment,\n                    articleNid: payload.articleNid,\n                    id: context.state.userId + postTime,\n                    likedBy: [\"\"],\n                    dislikedBy: [\"\"]\n                })\n            });\n\n            const data = await response.json();\n\n            if (!response.ok) {\n                console.log(data)\n                const error = new Error(data.message || 'Failed to post comment');\n                throw error;\n            }\n        }\n        else\n            alert(\"Please login to your account, or create a new one\");\n    },\n\n    async likeComment(_, payload) {\n        const resp = await fetch('https://subotica-info-5ee5a-default-rtdb.europe-west1.firebasedatabase.app/comments.json');\n\n        const data = await resp.json();\n        const user = localStorage.getItem('userId');\n\n        let likedKey;\n\n        for (const key of Object.keys(data)) {\n            if (data[key].id == payload)\n                likedKey = key;\n        }\n\n        if (data[likedKey].likedBy.find(lB => lB == user))\n            data[likedKey].likedBy.pop(user);\n        else\n            data[likedKey].likedBy.push(user);\n\n        await fetch('https://subotica-info-5ee5a-default-rtdb.europe-west1.firebasedatabase.app/comments.json', {\n            method: 'PUT',\n            body: JSON.stringify(data)\n        });\n    },\n\n    async dislikeComment(_, payload) {\n        const resp = await fetch('https://subotica-info-5ee5a-default-rtdb.europe-west1.firebasedatabase.app/comments.json');\n\n        const data = await resp.json();\n        const user = localStorage.getItem('userId');\n\n        let dislikedKey;\n\n        for (const key of Object.keys(data)) {\n            if (data[key].id == payload)\n                dislikedKey = key;\n        }\n\n        if (data[dislikedKey].dislikedBy.find(lB => lB == user))\n            data[dislikedKey].dislikedBy.pop(user);\n        else if(data[dislikedKey].likedBy.find(lB => lB == user))\n        {\n            data[dislikedKey].likedBy.pop(user);\n            data[dislikedKey]\n        }\n        else\n            data[dislikedKey].dislikedBy.push(user);\n\n        await fetch('https://subotica-info-5ee5a-default-rtdb.europe-west1.firebasedatabase.app/comments.json', {\n            method: 'PUT',\n            body: JSON.stringify(data)\n        });\n    },\n\n    async loadComments(context, payload) {\n        context.state.comments = [];\n        const response = await fetch(\"https://subotica-info-5ee5a-default-rtdb.europe-west1.firebasedatabase.app/comments.json\");\n\n        const data = await response.json();\n\n        if (!response.ok) {\n            console.log(data)\n            const error = new Error(data.message || 'Failed to load comments');\n            throw error;\n        }\n\n        const comments = Object.values(data);\n\n        context.commit('addComment', comments.filter(c => c.articleNid == payload));\n    }\n}"]}]}